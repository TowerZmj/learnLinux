# 学习Bash

## 1. 2 Bash shell

* 在shell环境中输入指令的方式如下：

` command [-options] parameter1 parameter2 ...`

1. command 为指令的名称，例如变换路劲的指令为cd
2. 中括号[]并不存在于实际的指令中，在加入参数时，通常为"-"符号，有时候完整名称

会输入"--"符号。例如ls --help

3. parameter1 parameter2 为依附在options之后的参数，或者是command的参数
4. command，-options，parameter1这几项之间以空格分隔，不论空几格shell都视为一格
5. 指令太长的时候，可以使用\符号来跳转enter，使指令连续到下一行

## 1.5 bash shell 的配置文件

### 1.5.1 系统设定值

​	所谓的系统设定值，也就是每个用户进入到bash shell之后先读取的配置文件。默认的配置文件有下列几个：

* /etc/profile：这个文件设定了几个重要变量，例如PATH、USER、MAIL、HOSTNAME、HISTSIZE、umask等，也同时规划出/etc/inputrc这个针对键盘热键设定的文件数据内容。可以在这里设定总体的PATH等信息。同时，这个文件还规划出/etc/profile.d及/etc/inputrc两个文件，其中，inputrc作用于history。总之，在这个文件中可以设定变量。但是设定上需要特别小心，因为所有的用户都会用到这个文件的信息。
* /etc/bashrc：这个文件用于规划umask，同时规划提示符的内容。特别留意的是，这个文件在不同的Linux版本里摆放的位置可能不太一样，所以需要查询。
* /etc/man.config：这个文件或许跟bash shell没有太大相关性。但是这个文件的内容规范了使用man和man page的路径在哪里寻找

这就是系统在设定时常用到的文件。需要特别留意的是，通常设定完这几个文件之后，需要先注销再登录后才会启动设定。

### 1.5.2 个人设定值

​	在个人的根目录下的几个隐藏文件中，分别会用到下面的几个文件：

* ~/.bash_profile：里面定义了个人路径（PATH）与环境变量的文件名称。可以在这里修改自己的个人路径，当然，也可以在~/.bashrc这个个人设定的变量中修改。有的时候可以用~/.profile或~/.bash_login等文件来取代这个文件！
* ~/.bashrc：这个文件对于个人喜好的bash设定是最重要的，例如命令别名的设定，路径的重新定义等。
* ~/.bash_history：这个文件用于将曾经用过的命令记录下来，
* ~/.bash_logout：这个文件则是在注销shell的时候BASH所做的事情。通常默认只是清除屏幕这件事。

source

​	 不注销而直接读入变量配置文件，可以使用它

` source 变量配置文件`



## 1.6 通配符与特殊符号

​	在bash中通常会用到一些通配符，这些通配符搭配一些特殊符号可以更好地利用指令。下面理出一些常用的通配符和特殊符号。

| 符号     | 内容                                       |
| -------- | ------------------------------------------ |
| *        | 通配符，代表任意字符（0到多个）            |
| ?        | 通配符，代表一个字符                       |
| #        | 注释，这个最常用在脚本中，视为说明         |
| \        | 跳转符号，将特殊字符或通配符还原成一般字符 |
| \|       | 分隔两个管线命令的界定                     |
| ;        | 连续性命令的界定（注意，与管线命令不同）   |
| ~        | 用户的根目录                               |
| $        | 即变量前需要加的变量值                     |
| &        | 将指令变成在背景下工作                     |
| !        | 逻辑运算中的“非”（not）                    |
| /        | 路径分隔符号                               |
| >,>>     | 输出导向，分别为“取代”与“累加"             |
| ‘        | 单引号，不具有变量置换功能                 |
| ”        | 具有变量置换功能                           |
| ``       | 两个"`"中间为可以先执行的指令              |
| ()       | 中间为子shell的起始和结束                  |
| []       | 中间为字符组合                             |
| {}       | 中间为命令去块组合                         |
| 组合键   | 执行结果                                   |
| Ctrl + C | 终止当前命令                               |
| Ctrl + D | 输入结束(EOF)，例如邮件结束的时候          |
| Ctrl + M | 就是Enter                                  |
| Ctrl + S | 暂停屏幕的输出                             |
| Ctrl + Q | 恢复屏幕的输出                             |
| Ctrl + U | 在提示符下，将整行命令删除                 |
| Ctrl + Z | 暂停当前命令                               |

## 1.8 命令重定向

在bash命令执行过程中，有三种输出输入状况，分别是：

* 标准输入：代码为0，或称为stdin，使用方式为<
* 标准输出：代码为1，或称为stdout，使用方式为1>
* 错误输出：代码为2，或称为stderr，使用方式为2>

基本的指令书写方式为：

指令	>			设备或文件

​		2>

​		\>\>

​		<		

左边一定是指令，右边则可能是设备或文件

注意，1>与2>之间没有空格符。

这里说明命令重定向里几个常用的符号与设备：

* <：由<的右边读入参数文件：
* \>：将原本由屏幕输出的正确数据输出到>右边的file(文件名称)或device(设备，如printer);
* \>\>：将原本由屏幕输出的正确数据输出到>>右边，与>不同的是，该文件将不会被覆盖，而新的数据将以累加方式添加到文件的最后面；
* 2>：将原本应该由屏幕输出的错误数据输出到2>的右边；
* /dev/null：可以视为垃圾设备

特别留意，同时写入同一个文件需要使用2>&1



## 1.9 管线命令 

​	管线命令使用的是"|"界定符号，另外，管线命令与连续输入命令是不一样的，这一点下面会再说明。下面我们先举一个例子来说明简单的管线命令。

​	假设我们要读取last指令中root登入的次数，步骤如下：

​	1.执行last，将这个月的所有人的所有登入数据取出来；

​	2.使用grep将上面的输出数据(stdout)中的root撷取出来，其他的不要；

​	3.使用wc这个可以计算行数的指令对上一步渠道的数据计算行数。

整个命令可以写成：

​	` last | grep root | wc -l`

管线命令"|"仅能处理经由前一个指令传来的正确信息，也就是标准输出(stdout)信息，对于标准错误信息并没有直接处理能力。

### 1.9.1 cut

语法：

​	` cut -d "分隔字符" [-cf] fields`

参数说明：

-d：后面接的是分隔字符，默认是空格符

-c：后面接的是第几个字符

-f：后面接的是第几个区块

### 1.9.2 sort

语法：

​	`sort [-t 分隔符] [(+起始)(-结束)] [-nru] `

参数说明：

-t 分隔符：使用分隔符隔开不同区块，默认是tab

+start -end：由第start区块排序到end区块

-n：使用出数字排序（否则会以字母方式排序）

-r：反向排序

-u：相同出现的一行，只列出一次

### 1.9.3 wc

语法：

​	` wc [-lmw]`

参数说明：

-l：多少行

-m：多少字符

-w：多少字

### 1.9.4 uniq

语法：

​	` uniq`

### 1.9.5 tee

语法：

​	`last | tee last.list | cut -d " " -f1`

在命令重定向的时候，如果我们将数据重定向到文件，屏幕上就不会出现任何数据。如果我们需要将数据同时显示在屏幕上和文件上，就需要tee指令了。使用last可以查看这个月的登入数据，而使用tee之后，会将数据同事传给下一个命令执行，也会将数据写入last.list文件中。

### 1.9.6 tr

语法：

​	` tr [-ds] SET1`

参数说明:

-d：删除SET1这个字符串

-s：取代重复的字符

### 1.9.7 split

语法：

​	` split [-bl] 输入文件 输出文件前导字符`

参数说明：

-b：以文件size来分

-l：以行数来分













